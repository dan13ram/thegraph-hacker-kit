import { Head } from "mdx-deck";
import Code from 'mdx-code';
import { CodeSurfer } from "code-surfer"
import { nightOwl } from "@code-surfer/themes"

import myTheme from './theme'

import GraphQuery from './components/GraphQuery'

export const theme = myTheme

<Head><title>Subgraph Dev Bootcamp</title></Head>

# üßë‚ÄçüöÄ Subgraph Dev Bootcamp ü•æ

Subgraphs, graph-nodes, and queries 

```bash
Made with <3 by pi0neerpat & dan13ram
```

---

# Outline

```
5 min - Graph queries 
30 min - Dev environment setup
30 min - ERC20 subgraph
10 min - Deploy & test
```

Prerequisites - See the main readme

---

# üì° Graph Query

- [Playground](https://thegraph.com/explorer/subgraph/superfluid-finance/superfluid-xdai)

```js
const query = `{
    # TODO
  }
`
const result = await axios.post(QUERY_URL, { query })
```

---

# üì° Graph Query - Example  

<GraphQuery/>

- See the React component above in `/components/GraphQuery.js`

---

# ERC20 Example üí∞



- How many tokens does a user have?

---

<CodeSurfer theme={nightOwl}> 

```js title="TestToken.sol"
// SPDX-License-Identifier: MIT

pragma solidity ^0.8.0;

import 'hardhat/console.sol';
import '@openzeppelin/contracts/token/ERC20/ERC20.sol';

contract TestToken is ERC20 {
    constructor() ERC20('Test Token', 'TEST') {
        console.log('Deploying TestToken');
    }

    function mint(address account, uint256 amount) external {
        console.log("Minting '%s' to '%s'", amount, account);
        _mint(account, amount);
    }
}
```

</CodeSurfer>

---

<CodeSurfer theme={nightOwl}>

```yaml showNumbers title="Subgraph.yaml" file=./subgraph.yaml
```

```yaml showNumbers 4:25 title="Data Sources" file=./subgraph.yaml
```

```yaml showNumbers 5:10 title="Contract Details" file=./subgraph.yaml
```


</CodeSurfer>

---

<CodeSurfer theme={nightOwl}>

```yaml showNumbers 11:25 title="Mappings" file=./subgraph.yaml
```

```yaml showNumbers 21:25 title="Handlers" file=./subgraph.yaml
```

</CodeSurfer>

---


<CodeSurfer theme={nightOwl}>

```graphql showNumbers title="Schema" file=./schema.graphql
```

```graphql showNumbers 1:11 title="Entiy" file=./schema.graphql
```

```graphql showNumbers 1:2 title="ID / Constants" file=./schema.graphql
```

```graphql showNumbers 3:4 title="State" file=./schema.graphql
```

```graphql showNumbers 5:10 title="Links" file=./schema.graphql
```

</CodeSurfer>

---

# üåÑ Your Adventure Awaits

- Subgraph Templates for multiple contracts (eg. factory)
- Multi-network deployment 

---

# ü§ù Get Help 

[üõ†Ô∏è Examples](https://docs.superfluid.finance/superfluid/resources/examples) to get started

Come say hello! http://discord.superfluid.finance






